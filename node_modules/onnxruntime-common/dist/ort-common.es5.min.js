/*!
 * ONNX Runtime Common v1.13.1
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ort=t():e.ort=t()}(self,(function(){return function(){"use strict";var e={d:function(t,r){for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{InferenceSession:function(){return h},Tensor:function(){return c},env:function(){return a},registerBackend:function(){return o}});var r={},n=[],o=function(e,t,o){if(!t||"function"!=typeof t.init||"function"!=typeof t.createSessionHandler)throw new TypeError("not a valid backend");var i=r[e];if(void 0===i)r[e]={backend:t,priority:o};else{if(i.priority>o)return;if(i.priority===o&&i.backend!==t)throw new Error('cannot register backend "'+e+'" using priority '+o)}if(o>=0){var a=n.indexOf(e);-1!==a&&n.splice(a,1);for(var f=0;f<n.length;f++)if(r[n[f]].priority<=o)return void n.splice(f,0,e);n.push(e)}},i=function(e){return t=void 0,o=void 0,a=function(){var t,o,i,a,f,u,s,l;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function f(i){return function(f){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,f])}}}(this,(function(c){switch(c.label){case 0:t=0===e.length?n:e,o=[],i=0,a=t,c.label=1;case 1:if(!(i<a.length))return[3,7];if(f=a[i],!(u=r[f]))return[3,6];if(u.initialized)return[2,u.backend];if(u.aborted)return[3,6];s=!!u.initPromise,c.label=2;case 2:return c.trys.push([2,4,5,6]),s||(u.initPromise=u.backend.init()),[4,u.initPromise];case 3:return c.sent(),u.initialized=!0,[2,u.backend];case 4:return l=c.sent(),s||o.push({name:f,err:l}),u.aborted=!0,[3,6];case 5:return delete u.initPromise,[7];case 6:return i++,[3,1];case 7:throw new Error("no available backend found. ERR: "+o.map((function(e){return"["+e.name+"] "+e.err})).join(", "))}}))},new((i=void 0)||(i=Promise))((function(e,r){function n(e){try{u(a.next(e))}catch(e){r(e)}}function f(e){try{u(a.throw(e))}catch(e){r(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(n,f)}u((a=a.apply(t,o||[])).next())}));var t,o,i,a},a=new(function(){function e(){this.wasm={},this.webgl={},this.logLevelInternal="warning"}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this.logLevelInternal},set:function(e){if(void 0!==e){if("string"!=typeof e||-1===["verbose","info","warning","error","fatal"].indexOf(e))throw new Error("Unsupported logging level: "+e);this.logLevelInternal=e}},enumerable:!1,configurable:!0}),e}()),f="undefined"!=typeof BigInt64Array&&"function"==typeof BigInt64Array.from,u="undefined"!=typeof BigUint64Array&&"function"==typeof BigUint64Array.from,s=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),l=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);f&&(s.set("int64",BigInt64Array),l.set(BigInt64Array,"int64")),u&&(s.set("uint64",BigUint64Array),l.set(BigUint64Array,"uint64"));var c=function(){function e(e,t,r){var n,o,i;if("string"==typeof e)if(n=e,i=r,"string"===e){if(!Array.isArray(t))throw new TypeError("A string tensor's data must be a string array.");o=t}else{var a=s.get(e);if(void 0===a)throw new TypeError("Unsupported tensor type: "+e+".");if(Array.isArray(t))o=a.from(t);else{if(!(t instanceof a))throw new TypeError("A "+n+" tensor's data must be type of "+a);o=t}}else if(i=t,Array.isArray(e)){if(0===e.length)throw new TypeError("Tensor type cannot be inferred from an empty array.");var f=typeof e[0];if("string"===f)n="string",o=e;else{if("boolean"!==f)throw new TypeError("Invalid element type of data array: "+f+".");n="bool",o=Uint8Array.from(e)}}else{var u=l.get(e.constructor);if(void 0===u)throw new TypeError("Unsupported type for tensor data: "+e.constructor+".");n=u,o=e}if(void 0===i)i=[o.length];else if(!Array.isArray(i))throw new TypeError("A tensor's dims must be a number array");var c=function(e){for(var t=1,r=0;r<e.length;r++){var n=e[r];if("number"!=typeof n||!Number.isSafeInteger(n))throw new TypeError("dims["+r+"] must be an integer, got: "+n);if(n<0)throw new RangeError("dims["+r+"] must be a non-negative integer, got: "+n);t*=n}return t}(i);if(c!==o.length)throw new Error("Tensor's size("+c+") does not match data length("+o.length+").");this.dims=i,this.type=n,this.data=o,this.size=c}return e.prototype.reshape=function(t){return new e(this.type,this.data,t)},e}(),y=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function f(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,f)}u((n=n.apply(e,t||[])).next())}))},p=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function f(i){return function(f){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,f])}}},h=function(){function e(e){this.handler=e}return e.prototype.run=function(e,t,r){return y(this,void 0,void 0,(function(){var n,o,i,a,f,u,s,l,y,h,b,d,w,g,m,v,A,E;return p(this,(function(p){switch(p.label){case 0:if(n={},o={},"object"!=typeof e||null===e||e instanceof c||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");if(i=!0,"object"==typeof t){if(null===t)throw new TypeError("Unexpected argument[1]: cannot be null.");if(t instanceof c)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(t)){if(0===t.length)throw new TypeError("'fetches' cannot be an empty array.");for(i=!1,a=0,f=t;a<f.length;a++){if("string"!=typeof(m=f[a]))throw new TypeError("'fetches' must be a string array or an object.");if(-1===this.outputNames.indexOf(m))throw new RangeError("'fetches' contains invalid output name: "+m+".");n[m]=null}if("object"==typeof r&&null!==r)o=r;else if(void 0!==r)throw new TypeError("'options' must be an object.")}else{for(u=!1,s=Object.getOwnPropertyNames(t),l=0,y=this.outputNames;l<y.length;l++)m=y[l],-1!==s.indexOf(m)&&(null===(h=t[m])||h instanceof c)&&(u=!0,i=!1,n[m]=h);if(u){if("object"==typeof r&&null!==r)o=r;else if(void 0!==r)throw new TypeError("'options' must be an object.")}else o=t}}else if(void 0!==t)throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(b=0,d=this.inputNames;b<d.length;b++)if(m=d[b],void 0===e[m])throw new Error("input '"+m+"' is missing in 'feeds'.");if(i)for(w=0,g=this.outputNames;w<g.length;w++)m=g[w],n[m]=null;return[4,this.handler.run(e,n,o)];case 1:for(E in v=p.sent(),A={},v)Object.hasOwnProperty.call(v,E)&&(A[E]=new c(v[E].type,v[E].data,v[E].dims));return[2,A]}}))}))},e.create=function(t,r,n,o){return y(this,void 0,void 0,(function(){var a,f,u,s,l,c,y;return p(this,(function(p){switch(p.label){case 0:if(f={},"string"==typeof t){if(a=t,"object"==typeof r&&null!==r)f=r;else if(void 0!==r)throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(a=t,"object"==typeof r&&null!==r)f=r;else if(void 0!==r)throw new TypeError("'options' must be an object.")}else{if(!(t instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&t instanceof SharedArrayBuffer))throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");if(u=t,s=0,l=t.byteLength,"object"==typeof r&&null!==r)f=r;else if("number"==typeof r){if(s=r,!Number.isSafeInteger(s))throw new RangeError("'byteOffset' must be an integer.");if(s<0||s>=u.byteLength)throw new RangeError("'byteOffset' is out of range [0, "+u.byteLength+").");if(l=t.byteLength-s,"number"==typeof n){if(l=n,!Number.isSafeInteger(l))throw new RangeError("'byteLength' must be an integer.");if(l<=0||s+l>u.byteLength)throw new RangeError("'byteLength' is out of range (0, "+(u.byteLength-s)+"].");if("object"==typeof o&&null!==o)f=o;else if(void 0!==o)throw new TypeError("'options' must be an object.")}else if(void 0!==n)throw new TypeError("'byteLength' must be a number.")}else if(void 0!==r)throw new TypeError("'options' must be an object.");a=new Uint8Array(u,s,l)}return c=f.executionProviders||[],y=c.map((function(e){return"string"==typeof e?e:e.name})),[4,i(y)];case 1:return[4,p.sent().createSessionHandler(a,f)];case 2:return[2,new e(p.sent())]}}))}))},e.prototype.startProfiling=function(){this.handler.startProfiling()},e.prototype.endProfiling=function(){this.handler.endProfiling()},Object.defineProperty(e.prototype,"inputNames",{get:function(){return this.handler.inputNames},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"outputNames",{get:function(){return this.handler.outputNames},enumerable:!1,configurable:!0}),e}();return t}()}));
//# sourceMappingURL=ort-common.es5.min.js.map